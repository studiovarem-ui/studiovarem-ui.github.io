<!DOCTYPE html>

<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>VAREM ‚Ä¢ Word Fall Quiz</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-dark: #0a0a0f;
      --bg-card: #12121a;
      --accent: #00f5d4;
      --accent-dim: #00f5d433;
      --danger: #ff6b6b;
      --warning: #ffd93d;
      --text: #e8e8e8;
      --text-dim: #888;
      --glass: rgba(255,255,255,0.03);
      --glass-border: rgba(255,255,255,0.08);
    }

```
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: 'Noto Sans KR', sans-serif;
  background: var(--bg-dark);
  color: var(--text);
  min-height: 100dvh;
  overflow: hidden;
  position: relative;
}

/* Animated background grid */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image: 
    linear-gradient(var(--glass-border) 1px, transparent 1px),
    linear-gradient(90deg, var(--glass-border) 1px, transparent 1px);
  background-size: 50px 50px;
  opacity: 0.3;
  animation: gridMove 20s linear infinite;
}

@keyframes gridMove {
  0% { transform: translate(0, 0); }
  100% { transform: translate(50px, 50px); }
}

/* Header */
.header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  padding: 12px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(to bottom, var(--bg-dark), transparent);
  z-index: 100;
}

.logo {
  font-family: 'Space Mono', monospace;
  font-size: 14px;
  font-weight: 700;
  color: var(--accent);
  letter-spacing: 2px;
}

.settings-btn {
  width: 36px;
  height: 36px;
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  background: var(--glass);
  color: var(--text);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}

.settings-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
}

/* Stats bar */
.stats {
  position: fixed;
  top: 60px;
  left: 20px;
  right: 20px;
  display: flex;
  gap: 12px;
  z-index: 90;
}

.stat-item {
  flex: 1;
  background: var(--glass);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  padding: 10px 14px;
  text-align: center;
}

.stat-label {
  font-size: 10px;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 4px;
}

.stat-value {
  font-family: 'Space Mono', monospace;
  font-size: 20px;
  font-weight: 700;
}

.stat-value.score { color: var(--accent); }
.stat-value.combo { color: var(--warning); }
.stat-value.lives { color: var(--danger); }

/* Game area */
.game-area {
  position: fixed;
  top: 130px;
  left: 0;
  right: 0;
  bottom: 200px;
  overflow: hidden;
}

/* Falling word */
.falling-word {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(135deg, var(--bg-card), #1a1a2e);
  border: 2px solid var(--accent);
  border-radius: 16px;
  padding: 16px 28px;
  text-align: center;
  box-shadow: 
    0 0 30px var(--accent-dim),
    0 10px 40px rgba(0,0,0,0.5);
  animation: glow 2s ease-in-out infinite alternate;
}

@keyframes glow {
  from { box-shadow: 0 0 20px var(--accent-dim), 0 10px 40px rgba(0,0,0,0.5); }
  to { box-shadow: 0 0 40px var(--accent-dim), 0 10px 40px rgba(0,0,0,0.5); }
}

.word-text {
  font-family: 'Space Mono', monospace;
  font-size: 24px;
  font-weight: 700;
  color: #fff;
  margin-bottom: 6px;
}

.word-pos {
  font-size: 11px;
  color: var(--accent);
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* Answer buttons */
.answers {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 16px;
  padding-bottom: max(16px, env(safe-area-inset-bottom));
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  background: linear-gradient(to top, var(--bg-dark) 80%, transparent);
}

.answer-btn {
  background: var(--bg-card);
  border: 1px solid var(--glass-border);
  border-radius: 14px;
  padding: 16px 12px;
  color: var(--text);
  font-size: 15px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
  position: relative;
  overflow: hidden;
}

.answer-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--accent), #00a896);
  opacity: 0;
  transition: opacity 0.15s;
}

.answer-btn span {
  position: relative;
  z-index: 1;
}

.answer-btn:active {
  transform: scale(0.97);
}

.answer-btn.correct::before {
  opacity: 1;
}

.answer-btn.correct {
  border-color: var(--accent);
  color: #fff;
}

.answer-btn.wrong {
  border-color: var(--danger);
  background: rgba(255,107,107,0.2);
}

.key-hint {
  position: absolute;
  top: 6px;
  right: 8px;
  font-family: 'Space Mono', monospace;
  font-size: 10px;
  color: var(--text-dim);
  background: var(--glass);
  padding: 2px 6px;
  border-radius: 4px;
}

/* Modals */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  backdrop-filter: blur(10px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s;
}

.modal-overlay.active {
  opacity: 1;
  visibility: visible;
}

.modal {
  background: var(--bg-card);
  border: 1px solid var(--glass-border);
  border-radius: 24px;
  padding: 32px 28px;
  width: 90%;
  max-width: 360px;
  text-align: center;
  transform: scale(0.9) translateY(20px);
  transition: transform 0.3s;
}

.modal-overlay.active .modal {
  transform: scale(1) translateY(0);
}

.modal-title {
  font-family: 'Space Mono', monospace;
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 8px;
}

.modal-subtitle {
  color: var(--text-dim);
  margin-bottom: 24px;
}

/* Start modal specific */
.day-selector {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
  margin-bottom: 20px;
}

.day-chip {
  padding: 8px 14px;
  background: var(--glass);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s;
}

.day-chip:hover {
  border-color: var(--accent);
}

.day-chip.selected {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--bg-dark);
  font-weight: 700;
}

.difficulty-selector {
  display: flex;
  gap: 10px;
  margin-bottom: 24px;
}

.diff-btn {
  flex: 1;
  padding: 12px;
  background: var(--glass);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  color: var(--text);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s;
}

.diff-btn:hover {
  border-color: var(--accent);
}

.diff-btn.selected {
  border-color: var(--accent);
  background: var(--accent-dim);
}

.diff-label {
  display: block;
  font-weight: 700;
  margin-bottom: 2px;
}

.diff-desc {
  font-size: 10px;
  color: var(--text-dim);
}

.play-btn {
  width: 100%;
  padding: 16px;
  background: linear-gradient(135deg, var(--accent), #00a896);
  border: none;
  border-radius: 14px;
  color: var(--bg-dark);
  font-size: 16px;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.15s, box-shadow 0.15s;
}

.play-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 30px var(--accent-dim);
}

/* Game over modal */
.final-score {
  font-family: 'Space Mono', monospace;
  font-size: 56px;
  font-weight: 700;
  color: var(--accent);
  margin: 16px 0;
}

.score-breakdown {
  display: flex;
  justify-content: center;
  gap: 24px;
  margin-bottom: 24px;
  padding: 16px;
  background: var(--glass);
  border-radius: 12px;
}

.breakdown-item {
  text-align: center;
}

.breakdown-value {
  font-family: 'Space Mono', monospace;
  font-size: 20px;
  font-weight: 700;
}

.breakdown-label {
  font-size: 11px;
  color: var(--text-dim);
}

/* Settings modal */
.setting-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 0;
  border-bottom: 1px solid var(--glass-border);
}

.setting-row:last-child {
  border-bottom: none;
}

.setting-label {
  font-size: 14px;
}

/* Ready state */
.ready-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: 'Space Mono', monospace;
  font-size: 32px;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 4px;
}

/* Combo popup */
.combo-popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: 'Space Mono', monospace;
  font-size: 48px;
  font-weight: 700;
  color: var(--warning);
  text-shadow: 0 0 30px var(--warning);
  pointer-events: none;
  opacity: 0;
  z-index: 200;
}

.combo-popup.show {
  animation: comboPop 0.6s ease-out forwards;
}

@keyframes comboPop {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
  50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
  100% { opacity: 0; transform: translate(-50%, -60%) scale(1); }
}

/* Floor line */
.floor-line {
  position: fixed;
  bottom: 200px;
  left: 20px;
  right: 20px;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--danger), transparent);
  opacity: 0.5;
}

/* Hide on desktop */
@media (min-width: 768px) {
  .answers {
    max-width: 500px;
    left: 50%;
    transform: translateX(-50%);
  }
  
  .game-area {
    max-width: 600px;
    left: 50%;
    transform: translateX(-50%);
  }
}
```

  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="logo">VAREM</div>
    <button class="settings-btn" id="settingsBtn">‚öô</button>
  </header>

  <!-- Stats -->

  <div class="stats">
    <div class="stat-item">
      <div class="stat-label">Score</div>
      <div class="stat-value score" id="score">0</div>
    </div>
    <div class="stat-item">
      <div class="stat-label">Combo</div>
      <div class="stat-value combo" id="combo">0</div>
    </div>
    <div class="stat-item">
      <div class="stat-label">Lives</div>
      <div class="stat-value lives" id="lives">‚ô•‚ô•‚ô•</div>
    </div>
  </div>

  <!-- Game Area -->

  <div class="game-area" id="gameArea">
    <div class="ready-text" id="readyText">READY</div>
  </div>

  <div class="floor-line"></div>

  <!-- Answers -->

  <div class="answers" id="answers">
    <button class="answer-btn" data-idx="0">
      <span class="key-hint">1</span>
      <span class="answer-text">-</span>
    </button>
    <button class="answer-btn" data-idx="1">
      <span class="key-hint">2</span>
      <span class="answer-text">-</span>
    </button>
    <button class="answer-btn" data-idx="2">
      <span class="key-hint">3</span>
      <span class="answer-text">-</span>
    </button>
    <button class="answer-btn" data-idx="3">
      <span class="key-hint">4</span>
      <span class="answer-text">-</span>
    </button>
  </div>

  <!-- Combo Popup -->

  <div class="combo-popup" id="comboPopup"></div>

  <!-- Start Modal -->

  <div class="modal-overlay active" id="startModal">
    <div class="modal">
      <div class="modal-title">Word Fall</div>
      <div class="modal-subtitle">Ï§ë3 ÏòÅÏñ¥ Îã®Ïñ¥ ÌÄ¥Ï¶à</div>

```
  <div class="day-selector" id="daySelector"></div>
  
  <div class="difficulty-selector">
    <button class="diff-btn selected" data-speed="slow">
      <span class="diff-label">üê¢ Easy</span>
      <span class="diff-desc">ÎäêÎ¶∞ ÏÜçÎèÑ</span>
    </button>
    <button class="diff-btn" data-speed="normal">
      <span class="diff-label">üöÄ Normal</span>
      <span class="diff-desc">Î≥¥ÌÜµ ÏÜçÎèÑ</span>
    </button>
    <button class="diff-btn" data-speed="fast">
      <span class="diff-label">‚ö° Hard</span>
      <span class="diff-desc">Îπ†Î•∏ ÏÜçÎèÑ</span>
    </button>
  </div>
  
  <button class="play-btn" id="startBtn">START</button>
</div>
```

  </div>

  <!-- Game Over Modal -->

  <div class="modal-overlay" id="gameOverModal">
    <div class="modal">
      <div class="modal-title">GAME OVER</div>
      <div class="final-score" id="finalScore">0</div>

```
  <div class="score-breakdown">
    <div class="breakdown-item">
      <div class="breakdown-value" id="correctCount">0</div>
      <div class="breakdown-label">Ï†ïÎãµ</div>
    </div>
    <div class="breakdown-item">
      <div class="breakdown-value" id="maxCombo">0</div>
      <div class="breakdown-label">ÏµúÎåÄ ÏΩ§Î≥¥</div>
    </div>
    <div class="breakdown-item">
      <div class="breakdown-value" id="accuracy">0%</div>
      <div class="breakdown-label">Ï†ïÌôïÎèÑ</div>
    </div>
  </div>
  
  <button class="play-btn" id="restartBtn">PLAY AGAIN</button>
</div>
```

  </div>

  <!-- Settings Modal -->

  <div class="modal-overlay" id="settingsModal">
    <div class="modal">
      <div class="modal-title">ÏÑ§Ï†ï</div>

```
  <div class="setting-row">
    <span class="setting-label">ÌÇ§Î≥¥Îìú ÌûåÌä∏ ÌëúÏãú</span>
    <input type="checkbox" id="showKeyHints" checked>
  </div>
  
  <div class="setting-row">
    <span class="setting-label">ÏßÑÎèô ÌîºÎìúÎ∞±</span>
    <input type="checkbox" id="vibration" checked>
  </div>
  
  <button class="play-btn" id="closeSettings" style="margin-top: 20px;">Îã´Í∏∞</button>
</div>
```

  </div>

  <script>
    // Word Data - Ï§ë3 ÏòÅÏñ¥ 30Ïùº Îã®Ïñ¥
    const WORDS = [
      {day:1,  w:"copyright",   p:"n",   m_en:"the legal right to control the use of a book, song, or work", m_ko:"Ï†ÄÏûëÍ∂å", e_en:"This photo is protected by copyright.", e_ko:"Ïù¥ ÏÇ¨ÏßÑÏùÄ Ï†ÄÏûëÍ∂åÏúºÎ°ú Î≥¥Ìò∏ÎêúÎã§."},
      {day:2,  w:"supporter",   p:"n",   m_en:"a person who supports a team, idea, or person", m_ko:"ÏßÄÏßÄÏûê; ÏùëÏõêÌïòÎäî ÏÇ¨Îûå", e_en:"The team thanked its supporters.", e_ko:"Í∑∏ ÌåÄÏùÄ ÏßÄÏßÄÏûêÎì§ÏóêÍ≤å Í∞êÏÇ¨Î•º Ï†ÑÌñàÎã§."},
      {day:3,  w:"identical",   p:"adj", m_en:"exactly the same", m_ko:"ÎòëÍ∞ôÏùÄ, ÎèôÏùºÌïú", e_en:"Their answers were identical.", e_ko:"Í∑∏Îì§Ïùò ÎãµÏùÄ ÎòëÍ∞ôÏïòÎã§."},
      {day:4,  w:"tray",        p:"n",   m_en:"a flat object used to carry things", m_ko:"ÏüÅÎ∞ò, Ìä∏Î†àÏù¥", e_en:"She carried cups on a tray.", e_ko:"Í∑∏ÎÖÄÎäî ÏüÅÎ∞òÏóê ÏªµÏùÑ Ïò¨Î†§ ÏòÆÍ≤ºÎã§."},
      {day:5,  w:"assign",      p:"v",   m_en:"to give someone a task or duty", m_ko:"(ÏùºÏùÑ) Îß°Í∏∞Îã§", e_en:"The teacher assigned homework.", e_ko:"ÏÑ†ÏÉùÎãòÏù¥ ÏàôÏ†úÎ•º ÎÇ¥Ï£ºÏÖ®Îã§."},
      {day:6,  w:"propose",     p:"v",   m_en:"to suggest a plan or idea", m_ko:"Ï†úÏïàÌïòÎã§", e_en:"He proposed a new idea in class.", e_ko:"Í∑∏Îäî ÏàòÏóÖÏóêÏÑú ÏÉàÎ°úÏö¥ ÏïÑÏù¥ÎîîÏñ¥Î•º Ï†úÏïàÌñàÎã§."},
      {day:7,  w:"total",       p:"adj", m_en:"complete; the whole amount", m_ko:"Ï†ÑÏ≤¥Ïùò, Ï¥ù", e_en:"The total cost was 10,000 won.", e_ko:"Ï¥ùÎπÑÏö©ÏùÄ 1Îßå ÏõêÏù¥ÏóàÎã§."},
      {day:8,  w:"obedient",    p:"adj", m_en:"doing what you are told to do", m_ko:"ÏàúÏ¢ÖÏ†ÅÏù∏, ÎßêÏùÑ Ïûò Îì£Îäî", e_en:"The dog is obedient and calm.", e_ko:"Í∑∏ Í∞ïÏïÑÏßÄÎäî ÎßêÏùÑ Ïûò Îì£Í≥† Ï∞®Î∂ÑÌïòÎã§."},
      {day:9,  w:"stationery",  p:"n",   m_en:"things like pens, pencils, and paper", m_ko:"Î¨∏Íµ¨Î•ò", e_en:"I bought stationery for school.", e_ko:"ÎÇòÎäî ÌïôÍµêÏóê Ïì∏ Î¨∏Íµ¨Î•òÎ•º ÏÉÄÎã§."},
      {day:10, w:"roast",       p:"v",   m_en:"to cook food in an oven or over heat", m_ko:"ÍµΩÎã§(Î°úÏä§Ìä∏ÌïòÎã§)", e_en:"We roasted chicken for dinner.", e_ko:"Ïö∞Î¶¨Îäî Ï†ÄÎÖÅÏúºÎ°ú ÏπòÌÇ®ÏùÑ Íµ¨Ïõ†Îã§."},
      {day:11, w:"volunteer",   p:"v",   m_en:"to offer to help without being paid", m_ko:"ÏûêÏõêÎ¥âÏÇ¨ÌïòÎã§", e_en:"She volunteered at a community center.", e_ko:"Í∑∏ÎÖÄÎäî ÏßÄÏó≠ ÏÑºÌÑ∞ÏóêÏÑú ÏûêÏõêÎ¥âÏÇ¨Î•º ÌñàÎã§."},
      {day:12, w:"long for",    p:"phr", m_en:"to want something very much", m_ko:"Í∞ÑÏ†àÌûà Î∞îÎùºÎã§", e_en:"He longed for a chance to travel.", e_ko:"Í∑∏Îäî Ïó¨ÌñâÌï† Í∏∞ÌöåÎ•º Í∞ÑÏ†àÌûà Î∞îÎûêÎã§."},
      {day:13, w:"destructive", p:"adj", m_en:"causing a lot of damage", m_ko:"ÌååÍ¥¥Ï†ÅÏù∏", e_en:"The storm was destructive.", e_ko:"Í∑∏ Ìè≠ÌíçÏùÄ ÌååÍ¥¥Ï†ÅÏù¥ÏóàÎã§."},
      {day:14, w:"stereotype",  p:"n",   m_en:"a fixed idea about a group of people", m_ko:"Í≥†Ï†ïÍ¥ÄÎÖê", e_en:"We should not judge people by stereotypes.", e_ko:"Ïö∞Î¶¨Îäî Í≥†Ï†ïÍ¥ÄÎÖêÏúºÎ°ú ÏÇ¨ÎûåÏùÑ ÌåêÎã®ÌïòÎ©¥ Ïïà ÎêúÎã§."},
      {day:15, w:"debate",      p:"n",   m_en:"a formal discussion with different opinions", m_ko:"ÌÜ†Î°†", e_en:"Our class had a debate about school rules.", e_ko:"Ïö∞Î¶¨ Î∞òÏùÄ ÌïôÍµê Í∑úÏπôÏóê ÎåÄÌï¥ ÌÜ†Î°†ÌñàÎã§."},
      {day:16, w:"put off",     p:"phr", m_en:"to delay doing something", m_ko:"ÎØ∏Î£®Îã§", e_en:"Don't put off your homework.", e_ko:"ÏàôÏ†úÎ•º ÎØ∏Î£®ÏßÄ Îßà."},
      {day:17, w:"merchandise", p:"n",   m_en:"goods that are for sale", m_ko:"ÏÉÅÌíà, ÌåêÎß§ Î¨ºÌíà", e_en:"The store sells sports merchandise.", e_ko:"Í∑∏ Í∞ÄÍ≤åÎäî Ïä§Ìè¨Ï∏† ÏÉÅÌíàÏùÑ ÌåêÎã§."},
      {day:18, w:"wash away",   p:"phr", m_en:"to remove or carry away with water", m_ko:"ÏîªÍ≤® ÎÇòÍ∞ÄÎã§; Ïì∏Î†§Í∞ÄÎã§", e_en:"Heavy rain washed away the dirt.", e_ko:"Ìè≠Ïö∞Í∞Ä ÌùôÏùÑ ÏîªÍ≤® ÎÇ¥Î†§Î≥¥ÎÉàÎã§."},
      {day:19, w:"custom",      p:"n",   m_en:"a traditional way of doing things", m_ko:"Í¥ÄÏäµ, ÌíçÏäµ", e_en:"It's a custom to bow in Korea.", e_ko:"ÌïúÍµ≠ÏóêÏÑúÎäî Ïù∏ÏÇ¨Î°ú Ï†àÌïòÎäî Í≤ÉÏù¥ ÌíçÏäµÏù¥Îã§."},
      {day:20, w:"requirement", p:"n",   m_en:"something you must have or do", m_ko:"ÌïÑÏàò Ï°∞Í±¥", e_en:"Meeting the requirement is important.", e_ko:"Ï°∞Í±¥ÏùÑ Ï∂©Ï°±ÌïòÎäî Í≤ÉÏù¥ Ï§ëÏöîÌïòÎã§."},
      {day:21, w:"claim",       p:"v",   m_en:"to say something is true", m_ko:"Ï£ºÏû•ÌïòÎã§", e_en:"He claimed that he was right.", e_ko:"Í∑∏Îäî ÏûêÏã†Ïù¥ ÎßûÎã§Í≥† Ï£ºÏû•ÌñàÎã§."},
      {day:22, w:"evolution",   p:"n",   m_en:"the gradual change of living things over time", m_ko:"ÏßÑÌôî", e_en:"We learned about evolution in science class.", e_ko:"Ïö∞Î¶¨Îäî Í≥ºÌïô ÏãúÍ∞ÑÏóê ÏßÑÌôîÎ•º Î∞∞Ïõ†Îã§."},
      {day:23, w:"staple",      p:"n",   m_en:"a basic and important item used often", m_ko:"ÌïÑÏàòÌíà", e_en:"Rice is a staple food in many countries.", e_ko:"ÏåÄÏùÄ ÎßéÏùÄ ÎÇòÎùºÏóêÏÑú Ï£ºÏãùÏù¥Îã§."},
      {day:24, w:"dust",        p:"n",   m_en:"very small dry pieces of dirt", m_ko:"Î®ºÏßÄ", e_en:"There is dust on the shelf.", e_ko:"ÏÑ†Î∞ò ÏúÑÏóê Î®ºÏßÄÍ∞Ä ÏûàÎã§."},
      {day:25, w:"scene",       p:"n",   m_en:"a place or part of a story that you see", m_ko:"Ïû•Î©¥; ÌòÑÏû•", e_en:"That scene in the movie was touching.", e_ko:"Í∑∏ ÏòÅÌôî Ïû•Î©¥ÏùÄ Í∞êÎèôÏ†ÅÏù¥ÏóàÎã§."},
      {day:26, w:"clone",       p:"v",   m_en:"to make an exact copy of a living thing", m_ko:"Î≥µÏ†úÌïòÎã§", e_en:"Scientists tried to clone an animal.", e_ko:"Í≥ºÌïôÏûêÎì§ÏùÄ ÎèôÎ¨ºÏùÑ Î≥µÏ†úÌïòÎ†§Í≥† ÌñàÎã§."},
      {day:27, w:"commute",     p:"v",   m_en:"to travel regularly between home and work/school", m_ko:"ÌÜµÍ∑ºÌïòÎã§; ÌÜµÌïôÌïòÎã§", e_en:"My father commutes by subway.", e_ko:"ÏïÑÎπ†Îäî ÏßÄÌïòÏ≤†Î°ú ÌÜµÍ∑ºÌïúÎã§."},
      {day:28, w:"unify",       p:"v",   m_en:"to bring together as one", m_ko:"ÌÜµÌï©ÌïòÎã§; ÌïòÎÇòÎ°ú ÎßåÎì§Îã§", e_en:"The leader tried to unify the team.", e_ko:"Í∑∏ Î¶¨ÎçîÎäî ÌåÄÏùÑ ÌïòÎÇòÎ°ú ÌÜµÌï©ÌïòÎ†§ ÌñàÎã§."},
      {day:29, w:"fair",        p:"adj", m_en:"treating people equally and correctly", m_ko:"Í≥µÏ†ïÌïú", e_en:"The teacher was fair to everyone.", e_ko:"ÏÑ†ÏÉùÎãòÏùÄ Î™®ÎëêÏóêÍ≤å Í≥µÏ†ïÌñàÎã§."},
      {day:30, w:"aware",       p:"adj", m_en:"knowing or realizing something", m_ko:"ÏïåÍ≥† ÏûàÎäî", e_en:"Be aware of your surroundings.", e_ko:"Ï£ºÎ≥ÄÏùÑ Ïûò ÏÇ¥Ìé¥Îùº."}
    ];

    // Game State
    let state = {
      score: 0,
      combo: 0,
      maxCombo: 0,
      lives: 3,
      correct: 0,
      total: 0,
      selectedDays: [0], // 0 = all
      speed: 'slow',
      currentWord: null,
      correctIdx: -1,
      isPlaying: false,
      fallInterval: null,
      wordY: 0,
      usedWords: [], // Ïù¥ÎØ∏ ÎÇòÏò® Îã®Ïñ¥ Ï∂îÏ†Å
      wordPool: []   // ÎÇ®ÏùÄ Îã®Ïñ¥ ÌíÄ
    };

    // Speed configs (pixels per frame at 60fps)
    const SPEEDS = {
      slow: { fallSpeed: 1.2, fallDuration: 8000 },
      normal: { fallSpeed: 2, fallDuration: 5000 },
      fast: { fallSpeed: 3.5, fallDuration: 3000 }
    };

    // DOM Elements
    const $ = id => document.getElementById(id);
    const scoreEl = $('score');
    const comboEl = $('combo');
    const livesEl = $('lives');
    const gameArea = $('gameArea');
    const readyText = $('readyText');
    const answersEl = $('answers');
    const answerBtns = document.querySelectorAll('.answer-btn');
    const comboPopup = $('comboPopup');
    const startModal = $('startModal');
    const gameOverModal = $('gameOverModal');
    const settingsModal = $('settingsModal');
    const daySelector = $('daySelector');

    // Initialize day selector
    function initDaySelector() {
      // All days option
      const allChip = document.createElement('div');
      allChip.className = 'day-chip selected';
      allChip.textContent = 'Ï†ÑÏ≤¥';
      allChip.dataset.day = '0';
      daySelector.appendChild(allChip);

      // Individual days (group by 10)
      const groups = ['1-10', '11-20', '21-30'];
      groups.forEach(g => {
        const chip = document.createElement('div');
        chip.className = 'day-chip';
        chip.textContent = `Day ${g}`;
        chip.dataset.group = g;
        daySelector.appendChild(chip);
      });

      // Click handler
      daySelector.addEventListener('click', e => {
        const chip = e.target.closest('.day-chip');
        if (!chip) return;

        document.querySelectorAll('.day-chip').forEach(c => c.classList.remove('selected'));
        chip.classList.add('selected');

        if (chip.dataset.day === '0') {
          state.selectedDays = [0];
        } else {
          const [start, end] = chip.dataset.group.split('-').map(Number);
          state.selectedDays = [];
          for (let i = start; i <= end; i++) state.selectedDays.push(i);
        }
      });
    }

    // Difficulty selector
    document.querySelectorAll('.diff-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.diff-btn').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        state.speed = btn.dataset.speed;
      });
    });

    // Get filtered words
    function getFilteredWords() {
      if (state.selectedDays.includes(0)) return [...WORDS];
      return WORDS.filter(w => state.selectedDays.includes(w.day));
    }

    // Get random word (no duplicates until all words used)
    function getRandomWord() {
      // ÌíÄÏù¥ ÎπÑÏñ¥ÏûàÏúºÎ©¥ ÏÉàÎ°ú Ï±ÑÏö∞Í∏∞
      if (state.wordPool.length === 0) {
        state.wordPool = shuffle(getFilteredWords());
        state.usedWords = [];
      }
      
      // ÌíÄÏóêÏÑú ÌïòÎÇò Í∫ºÎÇ¥Í∏∞
      const word = state.wordPool.pop();
      state.usedWords.push(word);
      return word;
    }

    // Get wrong answers
    function getWrongAnswers(correctWord, count) {
      const allMeanings = WORDS.map(w => w.m_ko);
      const wrong = allMeanings.filter(m => m !== correctWord.m_ko);
      const shuffled = wrong.sort(() => Math.random() - 0.5);
      return shuffled.slice(0, count);
    }

    // Shuffle array
    function shuffle(arr) {
      const a = [...arr];
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    // Update UI
    function updateUI() {
      scoreEl.textContent = state.score;
      comboEl.textContent = state.combo;
      livesEl.textContent = '‚ô•'.repeat(state.lives) + '‚ô°'.repeat(3 - state.lives);
    }

    // Show combo popup
    function showComboPopup(combo) {
      if (combo >= 3) {
        comboPopup.textContent = `${combo} COMBO!`;
        comboPopup.classList.remove('show');
        void comboPopup.offsetWidth;
        comboPopup.classList.add('show');
      }
    }

    // Vibrate
    function vibrate(pattern) {
      if ($('vibration')?.checked && navigator.vibrate) {
        navigator.vibrate(pattern);
      }
    }

    // Create falling word element
    function createFallingWord(word) {
      const el = document.createElement('div');
      el.className = 'falling-word';
      el.innerHTML = `
        <div class="word-text">${word.w}</div>
        <div class="word-pos">${word.p}</div>
      `;
      el.style.top = '-100px';
      return el;
    }

    // Start new round
    function startRound() {
      // Clear previous
      const prev = gameArea.querySelector('.falling-word');
      if (prev) prev.remove();

      // Get new word
      state.currentWord = getRandomWord();
      const wrongAnswers = getWrongAnswers(state.currentWord, 3);
      const allAnswers = shuffle([state.currentWord.m_ko, ...wrongAnswers]);
      state.correctIdx = allAnswers.indexOf(state.currentWord.m_ko);

      // Update answer buttons
      answerBtns.forEach((btn, i) => {
        btn.querySelector('.answer-text').textContent = allAnswers[i];
        btn.classList.remove('correct', 'wrong');
        btn.disabled = false;
      });

      // Create falling word
      const wordEl = createFallingWord(state.currentWord);
      gameArea.appendChild(wordEl);
      readyText.style.display = 'none';

      // Start falling animation
      state.wordY = -100;
      const gameHeight = gameArea.offsetHeight;
      const { fallSpeed } = SPEEDS[state.speed];

      if (state.fallInterval) cancelAnimationFrame(state.fallInterval);

      function fall() {
        if (!state.isPlaying) return;

        state.wordY += fallSpeed;
        wordEl.style.top = state.wordY + 'px';

        if (state.wordY >= gameHeight - 50) {
          // Hit floor - wrong answer
          handleAnswer(-1);
          return;
        }

        state.fallInterval = requestAnimationFrame(fall);
      }

      state.fallInterval = requestAnimationFrame(fall);
    }

    // Handle answer
    function handleAnswer(idx) {
      if (!state.isPlaying) return;
      if (state.fallInterval) cancelAnimationFrame(state.fallInterval);

      state.total++;
      const isCorrect = idx === state.correctIdx;

      // Visual feedback
      answerBtns.forEach((btn, i) => {
        btn.disabled = true;
        if (i === state.correctIdx) btn.classList.add('correct');
        else if (i === idx) btn.classList.add('wrong');
      });

      if (isCorrect) {
        state.correct++;
        state.combo++;
        if (state.combo > state.maxCombo) state.maxCombo = state.combo;
        state.score += 10 * (1 + Math.floor(state.combo / 5));
        showComboPopup(state.combo);
        vibrate(50);
      } else {
        state.combo = 0;
        state.lives--;
        vibrate([100, 50, 100]);
      }

      updateUI();

      if (state.lives <= 0) {
        endGame();
        return;
      }

      // Next round after delay
      setTimeout(() => {
        if (state.isPlaying) startRound();
      }, 800);
    }

    // Start game
    function startGame() {
      // Îã®Ïñ¥ ÌíÄ Ï¥àÍ∏∞Ìôî
      state.wordPool = shuffle(getFilteredWords());
      state.usedWords = [];
      
      state = {
        ...state,
        score: 0,
        combo: 0,
        maxCombo: 0,
        lives: 3,
        correct: 0,
        total: 0,
        isPlaying: true,
        wordY: 0
      };

      updateUI();
      startModal.classList.remove('active');
      gameOverModal.classList.remove('active');

      setTimeout(startRound, 500);
    }

    // End game
    function endGame() {
      state.isPlaying = false;
      if (state.fallInterval) cancelAnimationFrame(state.fallInterval);

      $('finalScore').textContent = state.score;
      $('correctCount').textContent = state.correct;
      $('maxCombo').textContent = state.maxCombo;
      $('accuracy').textContent = state.total > 0 
        ? Math.round((state.correct / state.total) * 100) + '%' 
        : '0%';

      setTimeout(() => {
        gameOverModal.classList.add('active');
      }, 500);
    }

    // Event listeners
    $('startBtn').addEventListener('click', startGame);
    $('restartBtn').addEventListener('click', startGame);

    answerBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        if (!state.isPlaying) return;
        handleAnswer(parseInt(btn.dataset.idx));
      });
    });

    // Keyboard controls
    document.addEventListener('keydown', e => {
      if (!state.isPlaying) return;
      const key = e.key;
      if (key >= '1' && key <= '4') {
        handleAnswer(parseInt(key) - 1);
      }
    });

    // Settings
    $('settingsBtn').addEventListener('click', () => {
      settingsModal.classList.add('active');
    });

    $('closeSettings').addEventListener('click', () => {
      settingsModal.classList.remove('active');
    });

    // Show/hide key hints
    $('showKeyHints')?.addEventListener('change', e => {
      document.querySelectorAll('.key-hint').forEach(h => {
        h.style.display = e.target.checked ? 'block' : 'none';
      });
    });

    // Close modals on overlay click
    [startModal, gameOverModal, settingsModal].forEach(modal => {
      modal.addEventListener('click', e => {
        if (e.target === modal && modal !== startModal) {
          modal.classList.remove('active');
        }
      });
    });

    // Init
    initDaySelector();
  </script>

</body>
</html>