<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VAREM · 중3 영어</title>

  <style>
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#0f0f10;
      color:#fff;
      font-family: system-ui, -apple-system, Apple SD Gothic Neo, Noto Sans KR, sans-serif;
    }

    .wrap{
      width:min(560px, 92vw);
      position:relative;
      padding-top:34px;
      padding-bottom:30px;
    }

    .brandTop{
      position:absolute;
      top:0;
      left:50%;
      transform:translateX(-50%);
      letter-spacing:.28em;
      font-weight:700;
      font-size:14px;
      opacity:.7;
      user-select:none;
    }

    .card{
      position:relative;
      width:100%;
      padding:22px;
      border:1px solid rgba(255,255,255,.12);
      border-radius:18px;
      background:rgba(255,255,255,.02);
      box-sizing:border-box;
      overflow:hidden;
    }

    .topRow{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }

    .subtitle{
      font-size:16px;
      opacity:.8;
      line-height:1.3;
    }

    /* Day: 박스 안 상단 오른쪽 + 클릭 가능 */
    .dayPill{
      border:1px solid rgba(255,255,255,.18);
      border-radius:999px;
      padding:6px 10px;
      font-size:12px;
      opacity:.75;
      white-space:nowrap;
      cursor:pointer;
      user-select:none;
    }

    .word{
      margin-top:14px;
      font-size:42px;
      font-weight:800;
      letter-spacing:.01em;
      text-transform:none;
    }

    .meta{
      margin-top:14px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
      font-size:12px;
      opacity:.85;
    }
    .pill{
      border:1px solid rgba(255,255,255,.18);
      border-radius:999px;
      padding:6px 10px;
      opacity:.75;
    }

    .langBtn{
      background:transparent;
      color:#fff;
      cursor:pointer;
      border:1px solid rgba(255,255,255,.18);
      border-radius:999px;
      padding:6px 10px;
      opacity:.45;
      transition: opacity .2s ease, border-color .2s ease, transform .2s ease;
    }
    .langBtn.active{
      opacity:1;
      border-color:rgba(255,255,255,.65);
    }

    @keyframes hintPulse {
      0%   { opacity:.45; border-color:rgba(255,255,255,.18); transform:translateY(0); }
      50%  { opacity:1;   border-color:rgba(255,255,255,.75); transform:translateY(-1px); }
      100% { opacity:.45; border-color:rgba(255,255,255,.18); transform:translateY(0); }
    }
    .hintPulse{
      animation: hintPulse .55s ease-in-out 0s 2;
    }

    .meaning{
      margin-top:18px;
      font-size:18px;
      line-height:1.6;
      opacity:.95;
    }
    .example{
      margin-top:10px;
      font-size:16px;
      line-height:1.6;
      opacity:.88;
    }

    .hintOutside{
      position:absolute;
      left:0;
      bottom:0;
      transform:translateY(50%);
      font-size:12px;
      opacity:.35;
      user-select:none;
      padding-left:4px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="brandTop">VAREM</div>

    <div class="card">
      <div class="topRow">
        <div class="subtitle">중3 영어 · 매일 한 단어</div>
        <div class="dayPill" id="daypill" title="Archive">Day -</div>
      </div>

      <div class="word" id="word">loading</div>

      <div class="meta">
        <div class="pill" id="pospill">POS</div>
        <div class="pill" id="levelpill">M3</div>

        <button class="langBtn active" id="btnEN" type="button">English</button>
        <button class="langBtn" id="btnKO" type="button">Korean</button>
      </div>

      <div class="meaning" id="meaning"></div>
      <div class="example" id="example"></div>
    </div>

    <div class="hintOutside">내일 다시 키링을 터치하세요.</div>
  </div>

<script>
/* ==========
   DATA
   ========== */
const LIST = [
  {
    w:"anxious",
    p:"adj",
    l:"M3",
    m_ko:"불안한, 걱정되는",
    m_en:"worried and nervous",
    e_en:"She felt anxious before the exam.",
    e_ko:"그녀는 시험 전에 불안해했다."
  },
  {
    w:"improve",
    p:"v",
    l:"M3",
    m_ko:"개선하다, 향상시키다",
    m_en:"to make something better",
    e_en:"He wants to improve his English.",
    e_ko:"그는 영어 실력을 향상시키고 싶어한다."
  },
  {
    w:"decide",
    p:"v",
    l:"M3",
    m_ko:"결정하다",
    m_en:"to choose; to make a decision",
    e_en:"She decided to study harder.",
    e_ko:"그녀는 더 열심히 공부하기로 결정했다."
  }
];

/* ==========
   DATE (KST)
   ========== */
function getKST(){
  const now = new Date();
  const utc = now.getTime() + now.getTimezoneOffset() * 60000;
  return new Date(utc + 9 * 3600000);
}
function dayOfYear(d){
  const start = new Date(d.getFullYear(), 0, 1);
  return Math.floor((d - start) / 86400000);
}

const today = getKST();
const doy = dayOfYear(today);
const item = LIST[doy % LIST.length];

/* ==========
   UI SETUP
   ========== */
const dayPill = document.getElementById("daypill");
dayPill.innerText = "Day " + (doy + 1);
dayPill.onclick = () => location.href = "archive.html"; // ✅ 아카이브로

document.getElementById("pospill").innerText = item.p;
document.getElementById("levelpill").innerText = item.l;
document.getElementById("word").innerText = (item.w ?? "").toLowerCase();

let mode = "EN"; // English default

function render(){
  const meaningEl = document.getElementById("meaning");
  const exampleEl = document.getElementById("example");

  if(mode === "EN"){
    meaningEl.innerText = "Meaning: " + (item.m_en ?? item.m_ko ?? "");
    exampleEl.innerText = "Example: " + (item.e_en ?? item.e_ko ?? "");
  } else {
    meaningEl.innerText = "뜻: " + (item.m_ko ?? item.m_en ?? "");
    exampleEl.innerText = "예문: " + (item.e_ko ?? item.e_en ?? "");
  }

  document.getElementById("btnEN").classList.toggle("active", mode==="EN");
  document.getElementById("btnKO").classList.toggle("active", mode==="KO");
}

document.getElementById("btnEN").onclick = () => { mode="EN"; render(); };
document.getElementById("btnKO").onclick = () => { mode="KO"; render(); };

render();

/* ==========
   HINT: Korean 버튼 2회 강조
   ========== */
const koBtn = document.getElementById("btnKO");
setTimeout(() => {
  koBtn.classList.add("hintPulse");
  setTimeout(() => koBtn.classList.remove("hintPulse"), 1200);
}, 450);
</script>
</body>
</html>