<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>BIRD DROP - ÏÉàÎò• ÎßûÏ∂îÍ∏∞</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html, body { width: 100%; height: 100%; overflow: hidden; touch-action: none; font-family: 'Press Start 2P', monospace; background: #0D0221; }
    body::before { content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: repeating-linear-gradient(0deg, rgba(0,0,0,0.1), rgba(0,0,0,0.1) 1px, transparent 1px, transparent 2px); pointer-events: none; z-index: 1000; }
    #gameContainer { position: relative; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; background: #0D0221; }
    #gameCanvas { display: block; background: #0D0221; image-rendering: pixelated; }
    #mobileControls { position: fixed; bottom: 0; left: 0; width: 100%; height: 180px; display: none; justify-content: space-between; align-items: center; padding: 10px 20px; z-index: 500; pointer-events: none; }
    .mobile-visible #mobileControls { display: flex; }
    #joystickArea { width: 140px; height: 140px; position: relative; pointer-events: auto; }
    #joystickBase { width: 120px; height: 120px; background: radial-gradient(circle, rgba(168,85,247,0.3) 0%, rgba(168,85,247,0.1) 100%); border: 3px solid rgba(168,85,247,0.6); border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); box-shadow: 0 0 20px rgba(168,85,247,0.3); }
    #joystickKnob { width: 50px; height: 50px; background: radial-gradient(circle, #A855F7 0%, #7C3AED 100%); border: 2px solid #C084FC; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); box-shadow: 0 0 15px #A855F7; transition: none; }
    #actionButtons { display: flex; flex-direction: column; gap: 10px; align-items: flex-end; pointer-events: auto; }
    #poopButton { width: 90px; height: 90px; background: radial-gradient(circle, #FF6B9D 0%, #E11D48 100%); border: 3px solid #FF8FAB; border-radius: 50%; font-size: 40px; display: flex; justify-content: center; align-items: center; box-shadow: 0 0 25px rgba(255,107,157,0.6); cursor: pointer; user-select: none; }
    #poopButton:active { transform: scale(0.95); box-shadow: 0 0 35px rgba(255,107,157,0.9); }
    #itemButtons { display: flex; gap: 8px; pointer-events: auto; }
    .item-btn { width: 50px; height: 50px; background: linear-gradient(180deg, #1E1E3F 0%, #0D0D2B 100%); border: 2px solid #A855F7; border-radius: 10px; font-size: 24px; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; cursor: pointer; }
    .item-btn:active { background: linear-gradient(180deg, #A855F7 0%, #7C3AED 100%); box-shadow: 0 0 15px #A855F7; }
    .item-btn .count { position: absolute; bottom: 2px; right: 4px; font-size: 8px; color: #00D4FF; font-family: 'Press Start 2P', monospace; }
    #pauseBtn { position: fixed; top: 10px; right: 10px; width: 44px; height: 44px; background: rgba(13,2,33,0.8); border: 2px solid #A855F7; border-radius: 8px; color: #A855F7; font-size: 20px; display: none; justify-content: center; align-items: center; z-index: 600; cursor: pointer; }
    .mobile-visible #pauseBtn { display: flex; }
    .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(180deg, #0D0221 0%, #1A0A2E 100%); display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 100; padding: 20px; overflow-y: auto; }
    .overlay.active { display: flex; }
    .grid-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(90deg, rgba(168,85,247,0.1) 1px, transparent 1px), linear-gradient(rgba(168,85,247,0.1) 1px, transparent 1px); background-size: 40px 40px; animation: gridMove 20s linear infinite; pointer-events: none; }
    @keyframes gridMove { 0% { background-position: 0 0; } 100% { background-position: 40px 40px; } }
    .menu-title { font-size: clamp(24px, 8vw, 36px); color: #FF6B9D; margin-bottom: 5px; text-shadow: 0 0 10px #FF6B9D, 0 0 20px #FF6B9D, 3px 3px 0 #A855F7; letter-spacing: 4px; animation: pulse 2s ease-in-out infinite; z-index: 10; text-align: center; }
    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }
    .menu-subtitle { font-size: clamp(10px, 3vw, 14px); color: #00D4FF; margin-bottom: 30px; text-shadow: 0 0 10px #00D4FF; letter-spacing: 6px; z-index: 10; }
    .pixel-btn { padding: clamp(12px, 3vw, 18px) clamp(30px, 8vw, 50px); font-family: 'Press Start 2P', monospace; font-size: clamp(10px, 3vw, 14px); border: none; cursor: pointer; margin: 8px; background: linear-gradient(180deg, #A855F7 0%, #7C3AED 100%); color: white; z-index: 10; min-width: 200px; text-align: center; }
    .pixel-btn:active { background: linear-gradient(180deg, #FF6B9D 0%, #E11D48 100%); box-shadow: 0 0 20px #FF6B9D; }
    .pixel-btn.secondary { background: linear-gradient(180deg, #1E1E3F 0%, #0D0D2B 100%); border: 2px solid #A855F7; }
    .controls-info { margin-top: 20px; color: #6B7280; text-align: center; font-size: clamp(6px, 2vw, 8px); line-height: 2.2; z-index: 10; }
    .controls-info.mobile-hide { display: block; }
    .mobile-visible .controls-info.mobile-hide { display: none; }
    .controls-info kbd { background: #374151; padding: 3px 6px; margin: 0 2px; border: 1px solid #4B5563; color: #00D4FF; }
    .bird-preview { width: 64px; height: 64px; margin: 15px auto; animation: birdFloat 1s ease-in-out infinite; z-index: 10; }
    @keyframes birdFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    .shop-overlay { padding: 15px; justify-content: flex-start; }
    .shop-header { display: flex; justify-content: space-between; align-items: center; width: 100%; max-width: 600px; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 2px solid #A855F7; flex-wrap: wrap; gap: 10px; }
    .shop-title { font-size: clamp(14px, 4vw, 20px); color: #FF6B9D; text-shadow: 0 0 10px #FF6B9D; }
    .shop-currency { display: flex; gap: 10px; font-size: clamp(8px, 2.5vw, 10px); }
    .currency-box { background: linear-gradient(180deg, #1E1E3F 0%, #0D0D2B 100%); padding: 6px 12px; border: 2px solid #A855F7; color: #00D4FF; }
    .shop-tabs { display: flex; gap: 5px; margin-bottom: 10px; flex-wrap: wrap; justify-content: center; }
    .shop-tab { padding: 8px 16px; background: #1E1E3F; border: 2px solid #374151; color: #9CA3AF; font-family: 'Press Start 2P', monospace; font-size: clamp(6px, 2vw, 8px); cursor: pointer; }
    .shop-tab.active { background: linear-gradient(180deg, #A855F7 0%, #7C3AED 100%); border-color: #A855F7; color: white; }
    .shop-items { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; width: 100%; max-width: 600px; max-height: 50vh; overflow-y: auto; padding: 5px; }
    .shop-item { background: linear-gradient(180deg, #1E1E3F 0%, #0D0D2B 100%); border: 2px solid #374151; padding: 10px; display: flex; flex-direction: column; align-items: center; cursor: pointer; }
    .shop-item:active { border-color: #00D4FF; box-shadow: 0 0 15px rgba(0,212,255,0.3); }
    .shop-item.owned { opacity: 0.5; }
    .shop-item-icon { font-size: 28px; margin-bottom: 6px; }
    .shop-item-name { color: #E5E7EB; font-size: clamp(6px, 2vw, 8px); margin-bottom: 3px; text-align: center; }
    .shop-item-desc { color: #6B7280; font-size: clamp(5px, 1.5vw, 6px); text-align: center; margin-bottom: 6px; }
    .shop-item-price { background: linear-gradient(180deg, #F59E0B 0%, #D97706 100%); padding: 3px 10px; font-size: clamp(6px, 2vw, 8px); color: #0D0221; }
    .shop-item-price.golden { background: linear-gradient(180deg, #FBBF24 0%, #F59E0B 100%); }
    .shop-footer { display: flex; justify-content: center; margin-top: 10px; padding-top: 10px; border-top: 2px solid #A855F7; }
    .stage-select-title { font-size: clamp(12px, 4vw, 18px); color: #00D4FF; margin-bottom: 25px; text-shadow: 0 0 15px #00D4FF; letter-spacing: 3px; z-index: 10; }
    .stage-buttons { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; z-index: 10; }
    .stage-btn { width: clamp(120px, 30vw, 160px); height: clamp(140px, 35vw, 180px); background: linear-gradient(180deg, #1E1E3F 0%, #0D0D2B 100%); border: 3px solid #A855F7; cursor: pointer; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; position: relative; }
    .stage-btn:active { border-color: #FF6B9D; box-shadow: 0 0 20px rgba(255,107,157,0.5); }
    .stage-btn.locked { opacity: 0.4; }
    .stage-btn-icon { font-size: clamp(32px, 10vw, 48px); margin-bottom: 8px; }
    .stage-btn-name { font-size: clamp(8px, 2.5vw, 12px); color: #E5E7EB; margin-bottom: 4px; }
    .stage-btn-stars { font-size: clamp(10px, 3vw, 14px); color: #FBBF24; text-shadow: 0 0 10px #FBBF24; }
    .stage-btn-locked { position: absolute; top: 8px; right: 8px; font-size: 18px; }
    .center-overlay { background: rgba(13,2,33,0.95); }
    .clear-title { font-size: clamp(18px, 6vw, 28px); color: #FBBF24; margin-bottom: 10px; text-shadow: 0 0 10px #FBBF24, 3px 3px 0 #B45309; animation: pulse 1s ease-in-out infinite; }
    .clear-stars { font-size: clamp(28px, 10vw, 40px); margin-bottom: 20px; color: #FBBF24; text-shadow: 0 0 20px #FBBF24; }
    .clear-stats { background: linear-gradient(180deg, #1E1E3F 0%, #0D0D2B 100%); border: 2px solid #A855F7; padding: 15px 30px; margin-bottom: 20px; }
    .clear-stat { display: flex; justify-content: space-between; color: #9CA3AF; font-size: clamp(8px, 2.5vw, 10px); margin: 8px 0; gap: 40px; }
    .clear-stat-value { color: #00D4FF; text-shadow: 0 0 5px #00D4FF; }
    .gameover-title { font-size: clamp(20px, 7vw, 32px); color: #EF4444; margin-bottom: 20px; text-shadow: 0 0 10px #EF4444, 3px 3px 0 #7F1D1D; animation: glitch 0.5s ease-in-out infinite; }
    @keyframes glitch { 0%, 100% { transform: translate(0); } 25% { transform: translate(-2px, 2px); } 75% { transform: translate(2px, -2px); } }
    .pause-title { font-size: clamp(18px, 6vw, 24px); color: #A855F7; margin-bottom: 25px; text-shadow: 0 0 20px #A855F7; }
    .notification { position: fixed; top: 60px; left: 50%; transform: translateX(-50%); background: linear-gradient(180deg, #1E1E3F 0%, #0D0D2B 100%); border: 2px solid #00D4FF; box-shadow: 0 0 20px rgba(0,212,255,0.5); color: #00D4FF; padding: 8px 20px; font-size: clamp(8px, 2.5vw, 10px); z-index: 800; opacity: 0; transition: opacity 0.3s; white-space: nowrap; }
    .notification.show { opacity: 1; }
    #landscapeWarning { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #0D0221; z-index: 2000; flex-direction: column; justify-content: center; align-items: center; color: #FF6B9D; text-align: center; padding: 20px; }
    #landscapeWarning .icon { font-size: 60px; margin-bottom: 20px; animation: rotate 2s ease-in-out infinite; }
    @keyframes rotate { 0%, 100% { transform: rotate(0deg); } 50% { transform: rotate(90deg); } }
    #landscapeWarning .text { font-size: 12px; line-height: 2; }
    @media (max-width: 600px) and (orientation: portrait) { #landscapeWarning { display: flex; } }
  </style>
</head>
<body>
  <div id="gameContainer">
    <canvas id="gameCanvas"></canvas>
    <div id="landscapeWarning"><div class="icon">üì±</div><div class="text">ÌôîÎ©¥ÏùÑ Í∞ÄÎ°úÎ°ú ÎèåÎ†§Ï£ºÏÑ∏Ïöî!<br>ROTATE TO LANDSCAPE</div></div>
    <div id="mobileControls"><div id="joystickArea"><div id="joystickBase"></div><div id="joystickKnob"></div></div><div id="actionButtons"><div id="itemButtons"><div class="item-btn" data-slot="0"><span class="icon">üçû</span><span class="count">0</span></div><div class="item-btn" data-slot="1"><span class="icon">üíä</span><span class="count">0</span></div><div class="item-btn" data-slot="2"><span class="icon">üõ°Ô∏è</span><span class="count">0</span></div><div class="item-btn" data-slot="3"><span class="icon">üí£</span><span class="count">0</span></div></div><div id="poopButton">üí©</div></div></div>
    <div id="pauseBtn" onclick="togglePause()">‚è∏</div>
    <div id="mainMenu" class="overlay active"><div class="grid-bg"></div><div class="menu-title">BIRD DROP</div><div class="menu-subtitle">ÏÉàÎò• ÎßûÏ∂îÍ∏∞</div><canvas id="birdPreview" class="bird-preview" width="64" height="64"></canvas><button class="pixel-btn" onclick="showStageSelect()">‚ñ∂ START</button><button class="pixel-btn secondary" onclick="openShopFromMenu()">‚¨° SHOP</button><div class="controls-info mobile-hide"><div><kbd>‚Üê</kbd><kbd>‚Üë</kbd><kbd>‚Üí</kbd><kbd>‚Üì</kbd> MOVE</div><div><kbd>SPACE</kbd> DROP</div><div><kbd>1</kbd><kbd>2</kbd><kbd>3</kbd><kbd>4</kbd> ITEM</div></div></div>
    <div id="stageSelect" class="overlay"><div class="grid-bg"></div><div class="stage-select-title">[ SELECT STAGE ]</div><div class="stage-buttons"><div class="stage-btn" onclick="startStage(1)"><div class="stage-btn-icon">üèôÔ∏è</div><div class="stage-btn-name">STAGE 1</div><div style="font-size:7px;color:#9CA3AF;margin-bottom:8px;">Ïù∏ ÎèÑ</div><div class="stage-btn-stars" id="stage1Stars">‚òÜ‚òÜ‚òÜ</div></div><div class="stage-btn" id="stage2Btn" onclick="startStage(2)"><div class="stage-btn-icon">üå≥</div><div class="stage-btn-name">STAGE 2</div><div style="font-size:7px;color:#9CA3AF;margin-bottom:8px;">Í≥µ Ïõê</div><div class="stage-btn-stars" id="stage2Stars">‚òÜ‚òÜ‚òÜ</div><div class="stage-btn-locked" id="stage2Lock">üîí</div></div></div><button class="pixel-btn secondary" style="margin-top:25px;" onclick="showMainMenu()">‚óÄ BACK</button></div>
    <div id="shopOverlay" class="overlay shop-overlay"><div class="shop-header"><div class="shop-title">‚¨° SHOP</div><div class="shop-currency"><div class="currency-box">ü™∂ <span id="shopFeathers">0</span></div><div class="currency-box">‚ú¶ <span id="shopGoldenFeathers">0</span></div></div></div><div class="shop-tabs"><button class="shop-tab active" onclick="switchShopTab(this,'consumables')">ITEMS</button><button class="shop-tab" onclick="switchShopTab(this,'upgrades')">UPGRADE</button><button class="shop-tab" onclick="switchShopTab(this,'birds')">BIRDS</button></div><div class="shop-items" id="shopItems"></div><div class="shop-footer"><button class="pixel-btn" onclick="closeShop()">‚óÄ CONTINUE</button></div></div>
    <div id="stageClearOverlay" class="overlay center-overlay"><div class="clear-title">‚òÖ STAGE CLEAR ‚òÖ</div><div class="clear-stars" id="clearStars">‚≠ê‚≠ê‚≠ê</div><div class="clear-stats"><div class="clear-stat"><span>SCORE</span><span class="clear-stat-value" id="clearScore">0</span></div><div class="clear-stat"><span>ACCURACY</span><span class="clear-stat-value" id="clearAccuracy">0%</span></div><div class="clear-stat"><span>FEATHERS</span><span class="clear-stat-value" id="clearFeathers">ü™∂ 0</span></div><div class="clear-stat"><span>GOLDEN</span><span class="clear-stat-value" id="clearGoldenFeathers">‚ú¶ 0</span></div></div><button class="pixel-btn" onclick="openShop()">‚¨° SHOP</button><button class="pixel-btn secondary" onclick="showStageSelect()">‚ñ∂ NEXT</button></div>
    <div id="gameoverOverlay" class="overlay center-overlay"><div class="gameover-title">GAME OVER</div><div class="clear-stats"><div class="clear-stat"><span>SCORE</span><span class="clear-stat-value" id="goScore">0</span></div><div class="clear-stat"><span>FEATHERS</span><span class="clear-stat-value" id="goFeathers">ü™∂ 0</span></div></div><button class="pixel-btn" onclick="retryStage()">‚Üª RETRY</button><button class="pixel-btn secondary" onclick="showStageSelect()">‚óÄ EXIT</button></div>
    <div id="pauseOverlay" class="overlay center-overlay"><div class="pause-title">II PAUSED</div><button class="pixel-btn" onclick="resumeGame()">‚ñ∂ RESUME</button><button class="pixel-btn secondary" onclick="openShopFromPause()">‚¨° SHOP</button><button class="pixel-btn secondary" onclick="quitToMenu()">‚úï QUIT</button></div>
    <div id="notification" class="notification"></div>
  </div>
  <script src="game.js"></script>
</body>
</html>